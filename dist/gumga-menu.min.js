!function(n){function a(s){if(e[s])return e[s].exports;var t=e[s]={i:s,l:!1,exports:{}};return n[s].call(t.exports,t,t.exports,a),t.l=!0,t.exports}var e={};a.m=n,a.c=e,a.i=function(n){return n},a.d=function(n,e,s){a.o(n,e)||Object.defineProperty(n,e,{configurable:!1,enumerable:!0,get:s})},a.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return a.d(e,"a",e),e},a.o=function(n,a){return Object.prototype.hasOwnProperty.call(n,a)},a.p="",a(a.s=0)}([function(n,a,e){"use strict";function s(n,a,e,s,t){var l=['<div class="modal-header">Change Password</div>','<div class="modal-body change-password">   <form name="ModalForm" novalidate>   <label> <small>Old Password</small></label>   <input type="password" ng-keyup="validPassword(user.newpass, user.oldpass)" ng-focus="oldPasswordInvalid=false" class="form-control" ng-model="user.oldpass" required/>   <label class="text-danger" ng-show="oldPasswordInvalid">Esta não é sua senha antiga</label>   <label><small> New Password</small></label>   <input type="password" class="form-control" ng-keyup="validPassword(user.newpass, user.oldpass)" ng-model="user.newpass" required/>   <label class="text-danger" style="width: 100%;"  ng-show="newPasswordInvalid">Por favor insira uma senha diferente da antiga.</label>   <label><small> New Password (again)</small></label>   <input type="password" class="form-control" ng-keyup="validPasswordConfirm(user.newpass,user.newpasscheck)" ng-model="user.newpasscheck" required/>   <label class="text-danger" style="width: 100%;"  ng-show="newPasswordConfirm">Repita a nova senha corretamente.</label></div>','<div class="modal-footer">   <button class="btn btn-primary" ng-click="ok(user)" type="submit" ng-disabled="ModalForm.$invalid || !btnEnabled"> Save</button>   <button class="btn btn-warning" ng-click="cancel()" type="button"> Cancel</button></div></form>'];return{restrict:"E",scope:!1,transclude:!0,template:['<nav id="navbar">',' <a href="#" class="navbar-logo">{{title | uppercase}}</a>',' <span class="organization"><small>{{info.organization}}</small></span>',' <div class="navbar-form navbar-left" ng-transclude></div>',' <b class="pull-right">','   <img ng-show="info.picture" class="avatar img-circle" src="{{info.picture}}" />','   <a href ng-blur="hidePanel()" class="status-navbar" ng-click="showPanelNavBar()">','     <small>{{info.name}} &nbsp;&nbsp; <i class="glyphicon glyphicon-triangle-bottom"></i> </small>',"   </a>"," </b>",' <span ng-if="multientity" ng-click="treatUrl()" class="glyphicon glyphicon-search btn pull-right"></span>',' <input ng-if="multientity" type="text" id="inputSearch" ng-keyup="submitSearch($event)" ng-model="search" ng-show="inputVisible" class="navbar-input flip-right" placeholder="Search">',"</nav>",'<div class="nav-panel" ng-show="showPanelNav">',' <div class="panel-body" id="navPanelBody">','   <button ng-repeat="link in navlinks" ng-click="handle(link)" class="btn btn-link"><i class="{{link.glyphicon}}"> </i>{{link.text}} </button>'," </div>","</div>"].join("\n"),link:function(s,o,i){i.putUrl,"true"!=i.multiEntity&&i.multiEntity||(s.multientity=!0),s[i.putUrl]?angular.noop:s[i.putUrl],s.info=a.getSessionStorageItem("user"),s.navlinks=[{text:"Change Password",glyphicon:"glyphicon glyphicon-user",value:"pass"},{text:"Logout",glyphicon:"glyphicon glyphicon-log-out",value:"logout"}],s.inputVisible=!1,s.title=i.title||"",s.treatUrl=function(){s.inputVisible=!s.inputVisible,t(function(){document.getElementById("inputSearch").focus()},200)},s.$on("close",function(){s.showPanelNav=!1}),s.showPanelNavBar=function(){s.showPanelNav=!s.showPanelNav},s.submitSearch=function(a){13===a.keyCode&&n.go("multientity",{search:s.search})},s.hidePanel=function(){t(function(){s.showPanelNav=!1},200)},s.handle=function(a){switch(s.showPanelNav=!s.showPanelNav,a.value){case"pass":e.open({template:l.join("\n"),size:"sm",controller:["$scope","$uibModalInstance","$http","GumgaWebStorage",function(n,a,e,s){var t=s.getSessionStorageItem("user");n.btnEnabled=!1,n.oldPasswordInvalid=!1,n.newPasswordConfirm=!1,n.newPasswordInvalid=!1,n.validPasswordConfirm=function(a,e){n.newPasswordConfirm=a!==e,n.enabledBtn()},n.validPassword=function(a,e){n.user.newpasscheck="",n.newPasswordInvalid=!(a!=e||!a),n.enabledBtn()},n.enabledBtn=function(){n.newPasswordConfirm||n.newPasswordInvalid?n.btnEnabled=!1:n.btnEnabled=!0},n.ok=function(s){e.put(i.putUrl,{user:t.user,password:s.oldpass,newPassword:s.newpass}).then(function(e){"BAD_PASSWORD"==e.data.response?n.oldPasswordInvalid=!0:"OK"==e.data.response?(n.$emit("successMessage",{title:"Senha alterada",message:"Sua senha foi alterada com sucesso."}),a.close()):a.close()})},n.cancel=function(){a.dismiss()}}],resolve:{}}).result.then(function(n){s.selected=n});break;case"logout":n.go(i.state)}},o.find("input").on("keypress",function(n){13==n.keyCode&&s.treatUrl()})}}}s.$inject=["$state","GumgaWebStorage","$uibModal","$rootScope","$timeout"],n.exports=angular.module("gumga.nav",["ui.bootstrap"]).directive("gumgaNav",s)}]);